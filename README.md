# 資產管理系統 V6.7.3

## 系統概述
這是一個基於 React + TypeScript 的資產管理系統，提供會員管理、會費管理、投資管理、發票管理等功能。

## 主要功能

### 1. 會員管理
- 會員資料管理
- 會員類型設定
- 會員狀態追蹤

### 2. 會費管理
- 會費設定管理
- 會費收取記錄
- 會費歷史查詢
- 會費匯出功能
- **發票/收據管理** ✨ 新增

### 3. 投資管理
- 投資項目管理
- 租金管理
- 利潤分配
- 投資歷史記錄

### 4. 公司管理
- 公司資料管理
- 公司類型分類

### 5. 會計管理
- 應收帳款管理
- 應付帳款管理
- 財務報表
- 月結管理

### 6. 會員服務
- 年度活動管理
- 活動報名管理
- 會員關懷記錄
- **風險管理** ✨ 新增

## 技術架構

### 前端
- **React 18** + **TypeScript**
- **Material-UI (MUI)** 組件庫
- **React Router** 路由管理
- **Axios** HTTP 客戶端
- **Notistack** 通知管理

### 後端
- **Node.js** + **Express**
- **PostgreSQL** 資料庫
- **Sequelize** ORM
- **JWT** 身份驗證
- **Render** 雲端部署

## 部署資訊

### 前端部署
- **URL**: https://asset-mgmt-v2.onrender.com
- **平台**: Render
- **分支**: main

### 後端 API
- **URL**: https://asset-mgmt-api-clean.onrender.com/api
- **平台**: Render
- **分支**: main

### 資料庫
- **類型**: PostgreSQL
- **平台**: Render
- **連線**: 雲端 PostgreSQL 服務

## 最新更新 (V6.7.3)

### 風險管理功能完整實現 ✨
- **會員逾期繳款記錄**: 從模擬資料改為真實資料庫連接，顯示會員會費逾期記錄
- **客戶租金逾期繳款記錄**: 從模擬資料改為真實資料庫連接，顯示租金逾期記錄
- **API 路由建立**: 新增 `/api/risk-management` 路由，提供逾期記錄查詢功能
- **前端組件修正**: 修正前端資料結構處理，確保正確顯示逾期記錄
- **資料庫查詢優化**: 使用原生 SQL 查詢，提高查詢效率

### 主要新增功能
- **風險管理 API**: 
  - `GET /api/risk-management/member-overdue-payments` - 查詢會員逾期繳款記錄
  - `GET /api/risk-management/rental-overdue-payments` - 查詢客戶租金逾期繳款記錄
  - `GET /api/risk-management/anomalies` - 查詢其他異常記錄（預留功能）
- **資料庫整合**: 風險管理功能從 localStorage 模擬資料改為真實資料庫連接
- **狀態篩選**: 自動篩選 `fees` 表中 `status = 'overdue'` 的記錄
- **租金逾期篩選**: 自動篩選 `rental_payments` 表中 `status = 'late'` 的記錄

### 技術改進
- **API 服務重構**: 修正 `ApiService` 中的風險管理方法，改為調用真實 API
- **前端資料處理**: 修正前端組件中的資料結構處理，確保與後端 API 回應格式一致
- **錯誤處理**: 加入詳細的錯誤日誌和異常處理機制
- **部署驗證**: 確保雲端部署後 API 功能正常運作

## 版本歷史

### V6.7.2 (2025-01-27)
- 會員服務功能完整實現
- 年度活動管理、會員關懷記錄從模擬資料改為真實資料庫
- 修正租金收款管理逾期狀態設定問題

### V6.7.1 (2025-01-27)
- 修正統計報表計算錯誤（字串轉數字問題）
- 新增「當年度」篩選和欄位排序功能
- 修正會員名稱顯示問題

### V6.6.0 (2025-01-26)
- 會員分潤功能完整實現
- 從模擬資料改為真實資料庫連接
- 修正分潤金額計算和會員名稱顯示

### V6.5.0 (2025-01-25)
- 租金收款管理功能實現
- 支援租金項目生成、狀態管理
- 修正 ENUM 類型不匹配問題

### V6.4.0 (2025-01-24)
- 會費管理功能完整實現
- 支援會費標準設定、收款狀況追蹤
- 修正資料庫結構和 API 整合

### V6.3.0 (2025-01-23)
- 投資管理功能實現
- 支援投資項目 CRUD 操作
- 修正資料庫遷移和部署問題

### V6.2.0 (2025-01-22)
- 公司管理功能實現
- 支援公司資料 CRUD 操作
- 修正認證和權限問題

### V6.1.0 (2025-01-21)
- 會員管理功能實現
- 支援會員資料 CRUD 操作
- 修正資料庫連接問題

### V6.0.0 (2025-01-20)
- 初始版本發布
- 基本架構建立
- 部署到 Render 平台

## 安裝與部署

### 本地開發
```bash
# 安裝依賴
npm install

# 啟動開發服務器
npm run dev

# 建置生產版本
npm run build
```

### 雲端部署
1. 推送程式碼到 GitHub
2. Render 自動部署
3. 檢查部署狀態和日誌

## 資料庫結構

### 主要資料表
- `users` - 會員資料
- `companies` - 公司資料
- `investments` - 投資項目
- `fees` - 會費記錄
- `rental_payments` - 租金收款記錄
- `member_profits` - 會員分潤記錄
- `annual_activities` - 年度活動
- `activity_registrations` - 活動報名
- `member_cares` - 會員關懷記錄

## 聯絡資訊
- 開發者: Asset Management Team
- 版本: V6.7.3
- 更新日期: 2025-01-27


